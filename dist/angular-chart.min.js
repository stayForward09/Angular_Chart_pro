!function(){"use strict";function t(){var t={},r="undefined"!=typeof window&&window.Chart||"undefined"!=typeof require&&require("chart.js");if("function"!=typeof r)throw new Error("Failed to load chart.js");var e={Chart:r,getOptions:function(r){var e=r&&t[r]||{};return angular.extend({},t,e)}};this.setOptions=function(r,e){return e?(t[r]=angular.extend(t[r]||{},e),void 0):(e=r,t=angular.extend(t,e),void 0)},this.$get=function(){return e}}function r(t){function r(t,r){return t&&r&&t.length&&r.length?Array.isArray(t[0])?t.length===r.length&&t[0].length===r[0].length:r.reduce(e,0)>0?t.length===r.length:!1:!1}function e(t,r){return t+r}function n(r,e,n){if(e.data&&e.data.length){e.getColour="function"==typeof e.getColour?e.getColour:c,e.colours=o(r,e);var i=n[0],u=i.getContext("2d"),l=Array.isArray(e.data[0])?h(e.labels,e.data,e.series||[],e.colours):d(e.labels,e.data,e.colours),s=angular.extend({},t.getOptions(r),e.options),f=new t.Chart(u)[r](l,s);return e.$emit("create",f),["hover","click"].forEach(function(t){e[t]&&(i["click"===t?"onclick":"onmousemove"]=a(e,f,t))}),e.legend&&"false"!==e.legend&&g(n,f),f}}function a(t,r,e){return function(n){var a=r.getPointsAtEvent||r.getBarsAtEvent||r.getSegmentsAtEvent;if(a){var o=a.call(r,n);t[e](o,n),t.$apply()}}}function o(r,e){for(var n=angular.copy(e.colours||Chart.defaults.global.colours||t.getOptions(r).colours);n.length<e.data.length;)n.push(e.getColour());return n.map(i)}function i(t){return"object"==typeof t&&null!==t?t:"string"==typeof t&&"#"===t[0]?u(f(t.substr(1))):c()}function c(){var t=[l(0,255),l(0,255),l(0,255)];return u(t)}function u(t){return{fillColor:s(t,.2),strokeColor:s(t,1),pointColor:s(t,1),pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:s(t,.8)}}function l(t,r){return Math.floor(Math.random()*(r-t+1))+t}function s(t,r){return"rgba("+t.concat(r).join(",")+")"}function f(t){var r=parseInt(t,16),e=r>>16&255,n=r>>8&255,a=255&r;return[e,n,a]}function h(t,r,e,n){return{labels:t,datasets:r.map(function(t,r){var a=angular.copy(n[r]);return a.label=e[r],a.data=t,a})}}function d(t,r,e){return t.map(function(t,n){return{label:t,value:r[n],color:e[n].strokeColor,highlight:e[n].pointHighlightStroke}})}function g(t,r){var e=t.parent(),n=e.find("chart-legend"),a="<chart-legend>"+r.generateLegend()+"</chart-legend>";n.length?n.replaceWith(a):e.append(a)}function p(t,r,e){Array.isArray(e.data[0])?t.datasets.forEach(function(t,e){(t.points||t.bars).forEach(function(t,n){t.value=r[e][n]})}):t.segments.forEach(function(t,e){t.value=r[e]}),t.update(),e.$emit("update",t)}function v(t){return!t||Array.isArray(t)&&!t.length||"object"==typeof t&&!Object.keys(t).length}return function(t){return{restrict:"CA",scope:{data:"=",labels:"=",options:"=",series:"=",colours:"=?",getColour:"=?",chartType:"=",legend:"@",click:"=",hover:"="},link:function(e,a){function o(r,o){if(!v(r)&&!angular.equals(r,o)){var c=t||e.chartType;c&&(i&&i.destroy(),i=n(c,e,a))}}var i,c=document.createElement("div");c.className="chart-container",a.replaceWith(c),c.appendChild(a[0]),"object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement&&window.G_vmlCanvasManager.initElement(a[0]),e.$watch("data",function(o,c){if(o&&o.length&&(!Array.isArray(o[0])||o[0].length)){var u=t||e.chartType;if(u){if(i){if(r(o,c))return p(i,o,e);i.destroy()}i=n(u,e,a)}}},!0),e.$watch("series",o,!0),e.$watch("labels",o,!0),e.$watch("options",o,!0),e.$watch("colours",o,!0),e.$watch("chartType",function(t,r){v(t)||angular.equals(t,r)||(i&&i.destroy(),i=n(t,e,a))}),e.$on("$destroy",function(){i&&i.destroy()})}}}}Chart.defaults.global.responsive=!0,Chart.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",Chart.defaults.global.colours=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"],angular.module("chart.js",[]).provider("ChartJs",t).factory("ChartJsFactory",["ChartJs",r]).directive("chartBase",["ChartJsFactory",function(t){return new t}]).directive("chartLine",["ChartJsFactory",function(t){return new t("Line")}]).directive("chartBar",["ChartJsFactory",function(t){return new t("Bar")}]).directive("chartRadar",["ChartJsFactory",function(t){return new t("Radar")}]).directive("chartDoughnut",["ChartJsFactory",function(t){return new t("Doughnut")}]).directive("chartPie",["ChartJsFactory",function(t){return new t("Pie")}]).directive("chartPolarArea",["ChartJsFactory",function(t){return new t("PolarArea")}])}();
//# sourceMappingURL=angular-chart.min.js.map