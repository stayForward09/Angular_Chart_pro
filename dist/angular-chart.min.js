!function(){"use strict";function t(){var t={},e={Chart:n,getOptions:function(e){var n=e&&t[e]||{};return angular.extend({},t,n)}};this.setOptions=function(e,n){return n?(t[e]=angular.extend(t[e]||{},n),void 0):(n=e,t=angular.extend(t,n),void 0)},this.$get=function(){return e}}function e(t){function e(t,e){return t&&e&&t.length&&e.length?Array.isArray(t[0])?t.length===e.length&&t[0].length===e[0].length:e.reduce(r,0)>0?t.length===e.length:!1:!1}function r(t,e){return t+e}function a(e,n,r){if(n.data&&n.data.length){n.getColour="function"==typeof n.getColour?n.getColour:u,n.colours=i(e,n);var a=r[0],c=a.getContext("2d"),l=Array.isArray(n.data[0])?d(n.labels,n.data,n.series||[],n.colours):g(n.labels,n.data,n.colours),s=angular.extend({},t.getOptions(e),n.options),f=new t.Chart(c)[e](l,s);return n.$emit("create",f),["hover","click"].forEach(function(t){n[t]&&(a["click"===t?"onclick":"onmousemove"]=o(n,f,t))}),n.legend&&"false"!==n.legend&&p(r,f),f}}function o(t,e,n){return function(r){var a=e.getPointsAtEvent||e.getBarsAtEvent||e.getSegmentsAtEvent;if(a){var o=a.call(e,r);t[n](o,r),t.$apply()}}}function i(e,r){for(var a=angular.copy(r.colours||n.defaults.global.colours||t.getOptions(e).colours);a.length<r.data.length;)a.push(r.getColour());return a.map(c)}function c(t){return"object"==typeof t&&null!==t?t:"string"==typeof t&&"#"===t[0]?l(h(t.substr(1))):u()}function u(){var t=[s(0,255),s(0,255),s(0,255)];return l(t)}function l(t){return{fillColor:f(t,.2),strokeColor:f(t,1),pointColor:f(t,1),pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:f(t,.8)}}function s(t,e){return Math.floor(Math.random()*(e-t+1))+t}function f(t,e){return"rgba("+t.concat(e).join(",")+")"}function h(t){var e=parseInt(t,16),n=e>>16&255,r=e>>8&255,a=255&e;return[n,r,a]}function d(t,e,n,r){return{labels:t,datasets:e.map(function(t,e){var a=angular.copy(r[e]);return a.label=n[e],a.data=t,a})}}function g(t,e,n){return t.map(function(t,r){return{label:t,value:e[r],color:n[r].strokeColor,highlight:n[r].pointHighlightStroke}})}function p(t,e){var n=t.parent(),r=n.find("chart-legend"),a="<chart-legend>"+e.generateLegend()+"</chart-legend>";r.length?r.replaceWith(a):n.append(a)}function v(t,e,n){Array.isArray(n.data[0])?t.datasets.forEach(function(t,n){(t.points||t.bars).forEach(function(t,r){t.value=e[n][r]})}):t.segments.forEach(function(t,n){t.value=e[n]}),t.update(),n.$emit("update",t)}function y(t){return!t||Array.isArray(t)&&!t.length||"object"==typeof t&&!Object.keys(t).length}return function(t){return{restrict:"CA",scope:{data:"=",labels:"=",options:"=",series:"=",colours:"=?",getColour:"=?",chartType:"=",legend:"@",click:"=",hover:"="},link:function(n,r){function o(e,o){if(!y(e)&&!angular.equals(e,o)){var c=t||n.chartType;c&&(i&&i.destroy(),i=a(c,n,r))}}var i,c=document.createElement("div");c.className="chart-container",r.replaceWith(c),c.appendChild(r[0]),"object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement&&window.G_vmlCanvasManager.initElement(r[0]),n.$watch("data",function(o,c){if(o&&o.length&&(!Array.isArray(o[0])||o[0].length)){var u=t||n.chartType;if(u){if(i){if(e(o,c))return v(i,o,n);i.destroy()}i=a(u,n,r)}}},!0),n.$watch("series",o,!0),n.$watch("labels",o,!0),n.$watch("options",o,!0),n.$watch("colours",o,!0),n.$watch("chartType",function(t,e){y(t)||angular.equals(t,e)||(i&&i.destroy(),i=a(t,n,r))}),n.$on("$destroy",function(){i&&i.destroy()})}}}}var n="undefined"!=typeof window&&window.Chart||"undefined"!=typeof require&&require("chart.js");if("function"!=typeof n)throw new Error("Failed to load chart.js");n.defaults.global.responsive=!0,n.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",n.defaults.global.colours=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"],angular.module("chart.js",[]).provider("ChartJs",t).factory("ChartJsFactory",["ChartJs",e]).directive("chartBase",["ChartJsFactory",function(t){return new t}]).directive("chartLine",["ChartJsFactory",function(t){return new t("Line")}]).directive("chartBar",["ChartJsFactory",function(t){return new t("Bar")}]).directive("chartRadar",["ChartJsFactory",function(t){return new t("Radar")}]).directive("chartDoughnut",["ChartJsFactory",function(t){return new t("Doughnut")}]).directive("chartPie",["ChartJsFactory",function(t){return new t("Pie")}]).directive("chartPolarArea",["ChartJsFactory",function(t){return new t("PolarArea")}])}();
//# sourceMappingURL=angular-chart.min.js.map